#!/usr/bin/env bash
# Author: Bruno Guimarães
# Description:
# Version: 1.0
# Last Updated: 2025-12-09

set -euo pipefail
IFS=$'\n\t'

# ──────────────────────────────────────────────────────────────────────────────
# Constants / Config
# ──────────────────────────────────────────────────────────────────────────────
# Import rofi theme
readonly SCRIPT_DIR="$(cd "$(dirname "$(readlink -f "${BASH_SOURCE[0]}")")/.." && pwd)"
source "$SCRIPT_DIR/lib/rofi-theme.sh"

readonly CHEATSHEET_DIR="$HOME/.utils/Cheatsheets"

# ──────────────────────────────────────────────────────────────────────────────
# Functions
# ──────────────────────────────────────────────────────────────────────────────
open_on_lvim() {
  local file_path="$1"
  alacritty -o 'window.startup_mode="Fullscreen"' -e bash -lic "lvim '$file_path'"
}

# ──────────────────────────────────────────────────────────────────────────────
# Main
# ──────────────────────────────────────────────────────────────────────────────
main() {
  local choice=$(ls "$CHEATSHEET_DIR" | rofi_cmd)
  [[ -z "$choice" ]] && exit 0
  open_on_lvim "$CHEATSHEET_DIR/$choice"
}

# ──────────────────────────────────────────────────────────────────────────────
# Entry Point
# ──────────────────────────────────────────────────────────────────────────────
# Only run main if script is executed (not sourced)
[[ "${BASH_SOURCE[0]}" == "${0}" ]] && main "$@"
