#!/usr/bin/env bash
# Author: Bruno Guimarães
# Description:
# Version: 1.0
# Last Updated: 2026-01-01

set -euo pipefail
IFS=$'\n\t'

# ──────────────────────────────────────────────────────────────────────────────
# Constants / Config
# ──────────────────────────────────────────────────────────────────────────────
readonly WALLPAPER_DIR="$HOME/Pictures/Wallpapers/"

# ──────────────────────────────────────────────────────────────────────────────
# Functions
# ──────────────────────────────────────────────────────────────────────────────
get_random_file_from() {
  local dir="$1"
  find "$dir" -type f | shuf -n 1
}

set_wallpaper(){
  local file="$1"

  # Set wallpaper using feh
  feh --bg-fill --no-fehbg "$wallpaper"
}

# ──────────────────────────────────────────────────────────────────────────────
# Main
# ──────────────────────────────────────────────────────────────────────────────
main() {
  local wallpaper="$(get_random_file_from "$WALLPAPER_DIR")"
  set_wallpaper "$wallpaper"
}

# ──────────────────────────────────────────────────────────────────────────────
# Entry Point
# ──────────────────────────────────────────────────────────────────────────────
# Only run main if script is executed (not sourced)
[[ "${BASH_SOURCE[0]}" == "${0}" ]] && main "$@"
